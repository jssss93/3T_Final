<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="member">

	<!-- 로그인, 회원정보수정 -->
 	<select id="loginGo" parameterType="hashmap" resultType="hashmap">
	<![CDATA[
		SELECT * FROM MEMBER WHERE MEMBER_ID = #{MEMBER_ID}
	]]>
	</select>

	<!-- 회원가입 -->
	<insert id="insertMember" parameterType="hashmap" useGeneratedKeys="true" keyProperty="MEMBER_NO">
		<selectKey keyProperty="MEMBER_NO" resultType="java.lang.Integer" order="BEFORE">
			SELECT MEMBER_NO_SEQ.NEXTVAL FROM DUAL
		</selectKey>
		<![CDATA[
		INSERT INTO MEMBER
		(MEMBER_NO, MEMBER_ID, PASSWD, NAME, BIRTH, ZIPCODE, ADDR1, ADDR2, PHONE, EMAIL, REGDATE)
		VALUES
		(#{MEMBER_NO}, #{MEMBER_ID}, #{PASSWD}, #{NAME}, #{BIRTH}, #{ZIPCODE}, #{ADDR1}, #{ADDR2}, #{PHONE}, #{EMAIL}, SYSDATE)
		]]>
		
		
	</insert>
	
	<select id="checkMember" parameterType="hashmap" resultType="java.lang.Integer">
	<![CDATA[
		select 
			count(email) 
		from 
			member
		where 
			email = #{MEMBER_EMAIL}
	]]>
	</select>

	
	<select id="checkId" parameterType="String" resultType="int">
	<![CDATA[
		SELECT 
			COUNT(*) 
		FROM 
			MEMBER
		WHERE 
			MEMBER_ID = #{MEMBER_ID}
	]]>
	</select>

	
	
</mapper>